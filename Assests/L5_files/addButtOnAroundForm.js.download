//Function for add button around from element
function addButtOnAroundForm(node) {
    if (node.offsetHeight > 0 &&
      node.parentNode &&
      node.parentNode.getElementsByClassName("share_cart_wrap").length <= 0
    ) {
      const htmlElement = createElementFromHTML(htmltoshow);
      const replacedTextContent = node.textContent
        .toLowerCase()
        .replace(/[^A-Z]/gi, "");
      if (
        node.querySelectorAll(`a[href="${cartProductsHref[0]}"]`).length > 0 ||
        replacedTextContent.includes("cart") ||
        replacedTextContent.includes("total")
      ) {
        if (
          shareCartCurrentStateData.socialSharePositionBottomStatus === true &&
          node.parentNode
        ) {
          node.parentNode.appendChild(htmlElement);
        } else if (
          shareCartCurrentStateData.socialSharePositionBottomStatus === false &&
          node.parentNode
        ) {
          node.parentNode.insertBefore(htmlElement, node);
        }
        if (
          shareCartData.attributes.customMessage &&
          shareCartData.attributes.customMessage.length > 0 &&
          shareCartCurrentStateData.customCartMessageStatus
        ) {
          const customMessageFieldValue = emojione.shortnameToImage(
            shareCartData.attributes.customMessage
          );
          const messageHtmlElement = createElementFromHTML(`
                  <div class="custom_css_priority1 custom_css_priority2">
                  <div class="div_share_cart_message custom_cart_msg"
                            style="display: flex;
                            margin-top: 20px;
                            background-color:${shareCartCurrentStateData.basicBackgroundColorMsg.value};
                            border: ${shareCartCurrentStateData.borderWidthMsg}px solid ${shareCartCurrentStateData.basicBorderColorMsg.value};
                            border-radius: ${shareCartCurrentStateData.borderRadiusMsg}px;
                            padding: 5px 10px;
                            margin: 10px 0px;
                            justify-content: space-between;
                            flex-grow: 1;
                            align-items: center;
                            font-size: ${shareCartCurrentStateData.customMsgFontSize}px;
                              font-weight: ${shareCartCurrentStateData.customMsgWeight};
                              color: ${shareCartCurrentStateData.basicTextColorMsg.value};
                              font-family: share-cart-font, MyFont, myFont;">
                      <p style="font-size: inherit;
                              font-weight: inherit;
                              color: inherit;
                              font-family: inherit;
                              margin: 0px;">
                              ${customMessageFieldValue}
                      </p>
                      <div style="display: flex;
                                  justify-content: center;
                                  align-items: center;"
                      >
                        <span 
                          class="share_cart_message_close_btn"
                          style="  
                            all: unset !important;
                            cursor: pointer !important;
                            line-height: 0.7 !important;
                            top: 0 !important;
                            position: relative !important;
                            margin-left: 10px !important;"
                          >
                          <svg style="fill: ${shareCartCurrentStateData.basicIconColorMsg.value} !important; stroke: ${shareCartCurrentStateData.basicIconColorMsg.value} !important;" xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 512.001 512.001" strokewidth="1">
                            <path d="M284.286,256.002L506.143,34.144c7.811-7.811,7.811-20.475,0-28.285c-7.811-7.81-20.475-7.811-28.285,0L256,227.717
                                  L34.143,5.859c-7.811-7.811-20.475-7.811-28.285,0c-7.81,7.811-7.811,20.475,0,28.285l221.857,221.857L5.858,477.859
                                  c-7.811,7.811-7.811,20.475,0,28.285c3.905,3.905,9.024,5.857,14.143,5.857c5.119,0,10.237-1.952,14.143-5.857L256,284.287
                                  l221.857,221.857c3.905,3.905,9.024,5.857,14.143,5.857s10.237-1.952,14.143-5.857c7.811-7.811,7.811-20.475,0-28.285
                                  L284.286,256.002z"></path>
                          </svg>
                        </span>
                      </div>
                  </div>
                  </div>
                  `);
          if (
            shareCartCurrentStateData.shareMsgPosition &&
            shareCartCurrentStateData.shareMsgPosition === "below"
          ) {
            node.parentNode.appendChild(messageHtmlElement);
          } else {
            if (
              node.parentNode.getElementsByClassName("share_cart_wrap").length >
                0 &&
              !shareCartCurrentStateData.socialSharePositionBottomStatus
            ) {
              node.parentNode.insertBefore(
                messageHtmlElement,
                node.parentNode.getElementsByClassName("share_cart_wrap")[0]
                  .parentNode
              );
            } else {
              node.parentNode.insertBefore(messageHtmlElement, node);
            }
          }
          node.parentNode
            .querySelector(".share_cart_message_close_btn")
            .addEventListener("click", function (event) {
              const customMessageElement = document.getElementsByClassName(
                "div_share_cart_message"
              );
              for (
                let customMessageElementNumber = 0;
                customMessageElementNumber < customMessageElement.length;
                customMessageElementNumber++
              ) {
                customMessageElement[customMessageElementNumber].style.display =
                  "none";
              }
              fetch(`/cart/update.js`, {
                method: "post",
                credentials: "same-origin",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                  attributes: {
                    BevySharedLink: true,
                    customMessage: "",
                  },
                }),
              });
            });
        }
      }
    }
}